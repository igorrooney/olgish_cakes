{
  "version": 2,
  "framework": "nextjs",
  "firewall": {
    "rateLimits": [
      {
        "name": "api-rate-limit",
        "limit": 60,
        "window": "1m",
        "match": {
          "path": ["/api/*"]
        }
      },
      {
        "name": "contact-form-limit",
        "limit": 10,
        "window": "1h",
        "match": {
          "path": ["/api/contact", "/api/quote", "/api/orders"]
        }
      }
    ]
  },
  "crons": [
    {
      "path": "/api/publish-scheduled-posts",
      "schedule": "0 9 * * *",
      "headers": [
        {
          "key": "Authorization",
          "value": "Bearer ${CRON_SECRET}"
        }
      ]
    },
    {
      "path": "/api/publish-scheduled-posts", 
      "schedule": "0 18 * * *",
      "headers": [
        {
          "key": "Authorization",
          "value": "Bearer ${CRON_SECRET}"
        }
      ]
    }
  ],
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "Strict-Transport-Security",
          "value": "max-age=63072000; includeSubDomains; preload"
        }
      ]
    }
  ],
  "redirects": [
    {
      "source": "/(.*)",
      "has": [
        {
          "type": "header",
          "key": "x-forwarded-proto",
          "value": "http"
        }
      ],
      "destination": "https://olgishcakes.co.uk/$1",
      "permanent": true
    }
  ]
}
